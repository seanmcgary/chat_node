<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <link href="css/style.css" rel="stylesheet" type="text/css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
        <script src="http://localhost:8080/socket.io/socket.io.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                var socket = io.connect('http://localhost:8080');
                var chat_session = null;

                socket.on('chat_login_status', function(data){
                    console.log(status);
                    if(data.status == true){
                        $('#login').css('display', 'none');
                        chat_session = new ChatSession($('#chat'));
                    }
                });

                $('#chat-login').live('submit', function(){

                    var creds = {};

                    creds.username = $('#username').val();
                    creds.password = $('#password').val();

                    socket.emit('chat_login', creds);
                    return false;
                });

                function ChatSession(chat_container_elem){
                    var self = this;

                    self.container_elem = chat_container_elem;

                    self.init();
                    
                }

                ChatSession.prototype = {
                    init: function(){
                        var self = this;

                        self.chat_tabs = $('<div class="chat-tabs" id="chat-tabs"></div>');
                        self.chat_container = $('<div class="chat-container"></div>');

                        self.container_elem.append(self.chat_tabs);
                        self.container_elem.append(self.chat_container);

                        self.contact_list = new ContactList(self);

                        self.current_chats = $('<div class="current-content"></div>');

                        self.chat_container.append(self.current_chats);

                        self.container_elem.css('display', 'block');
                    }
                };

                function ChatBox(){

                }

                ChatBox.prototype = {

                };

                function ContactList(chat_session){
                    var self = this;

                    self.chat_session = chat_session;

                    self.init();
                }

                ContactList.prototype = {
                    init: function(){
                        var self = this;

                        self.chat_session.chat_container.append('<div class="contacts">contacts</div>');
                    }
                };
            });
        </script>
    </head>
    <body>
        <div class="login" id="login">
            <form name="chat-login" id="chat-login">
                <div class="div-row">
                    <div class="field-label">
                        Username
                    </div>
                    <div class="field-value">
                        <input type="text" name="username" id="username">
                    </div>
                </div>
                <div class="div-row">
                    <div class="field-label">
                        Password
                    </div>
                    <div class="field-value">
                        <input type="password" name="password" id="password">
                    </div>
                </div>
                <div class="div-row">
                    <div class="field-label">
                        <input type="submit" class="green" value="Login">
                    </div>
                    <div class="field-value">
                    </div>
                </div>
            </form>
        </div>
        <div class="chat" id="chat">
            <!--<div class="chat-tabs">
                tabs
            </div>
            <div class="chat-container">
                <div class="contacts">
                    contacts
                </div>
                <div class="current-content">
                    <div class="chat-box">
                        <div class="chat-text">
                            Chat stuff
                        </div>
                        <div class="chat-input">
                            <input type="text" name="chat-input">
                        </div>
                    </div>
                </div>
            </div>-->
        </div>
    </body>
</html>